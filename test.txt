ansible-playbook -vvv -b --extra-vars "target=target_jb destination=${{ github.workspace }} deploy_mode=true rollback_mode=false" ./playbook/IBPS-deployment.yml


- name: IBPS-deployment
  hosts: your_target_host
  gather_facts: no
  tasks:
    - name: Include deploy playbook
      include_tasks: main-deploy.yml
      when: deploy_mode == true

    - name: Include rollback playbook
      include_tasks: main-rollback.yml
      when: rollback_mode == true
=======

TASK [IBPS-deployment : Include deploy playbook] *******************************
task path: /ansible/GITHUB_RUNNER/actions-runner10/_work/ibps-was-ansible-cd/ibps-was-ansible-cd/roles/IBPS-deployment/tasks/main.yml:1
skipping: [ANT3CASAPPS01] => {
    "changed": false,
    "skip_reason": "Conditional result was False"
}
TASK [IBPS-deployment : Include rollback playbook] *****************************
task path: /ansible/GITHUB_RUNNER/actions-runner10/_work/ibps-was-ansible-cd/ibps-was-ansible-cd/roles/IBPS-deployment/tasks/main.yml:5
skipping: [ANT3CASAPPS01] => {
    "changed": false,
    "skip_reason": "Conditional result was False"
}
META: ran handlers
META: ran handlers
==============

- name: Debug deploy_mode and rollback_mode
  debug:
    msg: "deploy_mode={{ deploy_mode }}, rollback_mode={{ rollback_mode }}"

- name: Include deploy playbook
  include_tasks: main-deploy.yml
  when: deploy_mode

- name: Include rollback playbook
  include_tasks: main-rollback.yml
  when: rollback_mode
