curl -H "Authorization: token TOKEN_GITHUB" -o "$filename" -L "https://maven.pkg.github.com/rakbank-internal/IBPS-Deployment/$filename"
===================

- hosts: '{{ target }}'
  become: yes
  become_user: itdevtra
  gather_facts: yes
  tasks:
    - name: Execute deployment script
      shell: |
        pwd
        /bin/bash -c './deploy.sh'
      args:
        chdir: '{{ destination }}'
      register: deploy_result
      ignore_errors: yes

    - name: Rollback on Deployment Failure
      shell: |
        pwd
        /bin/bash -c './rollback.sh change.log'
      args:
        chdir: '{{ destination }}'
      when: deploy_result|failed
