---
    - name: Download zip from GitHub packages on Runner
      delegate_to: localhost
      run_once: true
      get_url:
        url: "{{ zip_file_url }}"
        dest: "/tmp/{{ zip_file_name }}"
        headers:
          Authorization: "token {{ github_token }}"

    - name: Copy zip to Target Server
      copy:
        src: "/tmp/{{ zip_file_name }}"
        dest: "{{ Profile_home }}/{{ zip_file_name }}"
      
    - name: Deploy Application
      shell: 'cd {{ destination }} && ./deploy-1.sh'
      register: deploy_result
      ignore_errors: yes

    #- name: Rollback on Deployment Failure
     # delegate_to: localhost
      #shell: 'cd {{ destination }} && ./rollback.sh change.log'
      #when: deploy_result|failed

    #- name: Clean up zip file from Runner
     # delegate_to: localhost
      #file:
       # path: "/tmp/{{ zip_file_name }}"
        #state: absent
      #run_once: true       
