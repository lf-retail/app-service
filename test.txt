#!/bin/bash

# deploy-1.sh

Profile_home="/ibm/IBM-CAS/WebSphere/AppServer/profiles/AppSrv01/bin"
zip_file_name="release.zip"

# Step 0: Check if release.zip exists in the specified location
if [ ! -f "$Profile_home/$zip_file_name" ]; then
    echo "Error: $zip_file_name not found in $Profile_home."
    exit 1
fi

# Step 1: Extract release.zip in the temp directory within Profile_home
unzip -q "$Profile_home/$zip_file_name" -d "$Profile_home/temp_directory/"

# Step 2: Read release.txt content
while IFS=, read -r file target; do
    # Step 3: Copy application files to targeted location within Profile_home
    cp "$Profile_home/temp_directory/$file" "$Profile_home/$target"
done < "$Profile_home/temp_directory/release.txt"

echo "Deployment completed successfully."
