#!/bin/bash

Profile_home="$1"
backup_location="$2"

# Find the latest backup directory with date and time
latest_backup=$(ls -td "$backup_location"/backup-* | head -n 1)

if [ -z "$latest_backup" ]; then
    echo "No backup directories found."
    exit 1
fi

echo "Latest backup directory: $latest_backup"

# List the contents of the latest backup directory
ls -la "$latest_backup"

# Iterate through each file in the latest backup directory
for file in "$latest_backup"/*; do
    if [ -f "$file" ]; then
        # Get the filename without the path
        filename=$(basename "$file")
        
        # Copy the file to the targeted location
        cp -r "$file" "$Profile_home/$filename"
        
        # Print information about the rollback
        echo "Rollback: $file -> $Profile_home/$filename"
    fi
done
